<!DOCTYPE html>
<html>
<head>
  <title>Snack Order</title>
</head>
<body>
  <h2>Snack Ordering System</h2>
  <div id="demo"></div>
  <p id="grandTotal" style="font-weight: bold;"></p>

  <script>
    var nums = [1, 2, 3, 4];
    var items = ["Coke", "Kit Kat", "Bar One", "Fanta"];
    var prices = [7.5, 9.5, 8.5, 7.5];
    var quantities = [0, 0, 0, 0];
    var totals = [0.0, 0.0, 0.0, 0.0];
    var totalOrderAmt = 0;

    // Add item
    function add_selection(x) {
      quantities[x]++;
      update_totals(x);
    }

    // Remove item
    function remove_selection(x) {
      if (quantities[x] > 0) {
        quantities[x]--;
        update_totals(x);
      }
    }

    // Update totals
    function update_totals(index) {
      totals[index] = prices[index] * quantities[index];
      totalOrderAmt = totals.reduce((sum, val) => sum + val, 0);
      display_all();
    }

    // Main display function
    function display_all() {
      var myTable = "<table border='1' cellpadding='5'><tr>";
      myTable += "<th style='width: 80px;'>Num</th>";
      myTable += "<th style='width: 100px;'>Item</th>";
      myTable += "<th style='width: 100px;'>Price</th>";
      myTable += "<th style='width: 100px;'>Quantity</th>";
      myTable += "<th style='width: 100px;'>Total</th>";
      myTable += "<th>Add</th>";
      myTable += "<th>Remove</th></tr>";

      for (let i = 0; i < items.length; i++) {
        myTable += "<tr>";
        myTable += "<td>" + nums[i] + "</td>";
        myTable += "<td>" + items[i] + "</td>";
        myTable += "<td>R " + prices[i].toFixed(2) + "</td>";
        myTable += "<td>" + quantities[i] + "</td>";
        myTable += "<td>R " + totals[i].toFixed(2) + "</td>";
        // Dynamically generate JS buttons with onclick handlers
        myTable += "<td><button onclick='add_selection(" + i + ")'>Add</button></td>";
        myTable += "<td><button onclick='remove_selection(" + i + ")'>Remove</button></td>";
        myTable += "</tr>";
      }

      myTable += "</table>";
      document.getElementById("demo").innerHTML = myTable;
      document.getElementById("grandTotal").innerHTML = "Total Order Amount: R " + totalOrderAmt.toFixed(2);
    }

    // Run display on load
    window.onload = function () {
      display_all();
    }
  </script>
</body>
</html>
